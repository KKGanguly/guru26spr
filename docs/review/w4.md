<p align="center">
  <a href="https://github.com/txt/guru26spr/blob/main/README.md"><img 
     src="https://img.shields.io/badge/Home-%23ff5733?style=flat-square&logo=home&logoColor=white" /></a>
  <a href="https://github.com/txt/guru26spr/blob/main/docs/lect/syllabus.md"><img 
      src="https://img.shields.io/badge/Syllabus-%230055ff?style=flat-square&logo=openai&logoColor=white" /></a>
  <a href="https://docs.google.com/spreadsheets/d/1xZfIwkmu6hTJjXico1zIzklt1Tl9-L9j9uHrix9KToU/edit?usp=sharing"><img
      src="https://img.shields.io/badge/Teams-%23ffd700?style=flat-square&logo=users&logoColor=white" /></a>
  <a href="https://moodle-courses2527.wolfware.ncsu.edu/course/view.php?id=8119"><img 
      src="https://img.shields.io/badge/Moodle-%23dc143c?style=flat-square&logo=moodle&logoColor=white" /></a>
  <a href="https://discord.gg/vCCXMfzQ"><img 
      src="https://img.shields.io/badge/Chat-%23008080?style=flat-square&logo=discord&logoColor=white" /></a>
  <a href="https://github.com/txt/guru26spr/blob/main/LICENSE.md"><img 
      src="https://img.shields.io/badge/Â©%20timm%202026-%234b4b4b?style=flat-square&logoColor=white" /></a></p>
<h1 align="center">:cyclone: CSC491/591: How to be a SE Guru <br>NC State, Spring '26</h1>
<img src="https://raw.githubusercontent.com/txt/guru26spr/refs/heads/main/etc/img/banenr.png"> 

# W4 review

## Aside

Here's  that trick writing one Lua function (`map`) the implement `collect, reject, select` using
that promitive.

Note that for `select` and `reject` to work as filters (changing the list size), they must return nil when the condition fails, because Lua tables count false as a valid entry.

```lua
function map(t, f, u) 
  u={}; for _, v in pairs(t) do u[1+#u]=f(v) end; return u end

function reject(t, f) 
  return map(t, function(v) return not f(v) and v or nil end) end

select, collect = map, map
```

## Part 1: Glossary of Concepts

* Shell (Bash) 
  * Glue: Connects programs via streams; not for heavy compute.
    * `grep "Error" log.txt | sort | uniq -c`
  * Shebang (`#!`): First line telling the OS which interpreter to use.
    * `#!/bin/bash` or `#!/usr/bin/env python3`
  * Exit Codes: 0 = Success, 1-255 = Failure. Controls `&&` / `||` flow.
    * `mkdir dir && cd dir || echo "Fail"`
  * Special Vars: `$0` (Script Name), `$#` (Arg Count), `$?` (Last Exit Code).
  * Command Sub: Captures output into a variable. Preferred over backticks.
    * `files=$(ls *.txt)`

* Awk (Gawk)
  * Pattern-Action: `condition { run_code }`. Defaults to printing if code missing.
    * `NR==1 { next } /fail/ { print $0 }`
  * Field Vars: `$0` (Row), `$1`..`$NF` (Cols). `$NF` is the last column.
  * Auto-Init: Variables spring into existence as 0 or "" when used.
    * `sum += $1  # 'sum' created instantly`
  * Separators: `-F` sets the input delimiter (default whitespace).
    * `awk -F, '{print $2}' data.csv`

* Make (Build Automation)
  * Idempotence: Running `make` twice does nothing if files haven't changed.
  * Phony Targets: Labels that are actions, not files (prevents conflicts).
    * `.PHONY: clean test`
  * Automatic Vars: `$@` (Target), `$<` (1st Prereq), `$^` (All Prereqs).
  * Macros: `X = $(Y)` (Lazy/Recursive) vs `X := $(Y)` (Immediate/Once).

* Programming Logic & Types (Lua/General)
  * Collect: Maps `f` over `t`. Returns `u`.
    * `function collect(t,f,u) u={}; for _,v in pairs(t) do u[1+#u]=f(v) end; return u end`
  * Select: Filters `t` using the Nil Quirk (Explicit `or nil` required).
    * `function select(t,f) return collect(t, function(v) return f(v) and v or nil end) end`
  * Reject: Inverts selection.
    * `function reject(t,f) return collect(t, function(v) return not f(v) and v or nil end) end`
  * Nil Quirk: Assigning `nil` to a Lua array index (`t[#t+1]=nil`) adds nothing.
  * Duck Typing: "If it walks/quacks like a duck..." (Interface over Identity).

---

## Part 2: Review Questions

1. a. Define "Shebang" and its role in script execution.
      - `#!/usr/bin/env bash`
   b. Analyze why `#!/usr/bin/env python` is more portable than `#!/bin/python`.

2. a. Define "Exit Codes" and the specific value for success.
      - `0` is success.
   b. Deconstruct `make && ./app`. Why does `./app` NOT run if `make` returns 2?

3. a. Define the Awk `BEGIN` block.
      - `BEGIN { FS="," }`
   b. Synthesize an Awk one-liner that sums the third column of a CSV file. 
      (Hint: Initialize in BEGIN? No, auto-init handles it. Print in END.)

4. a. Define the "Nil Quirk" in Lua array construction.
   b. Evaluate why `return f(v) and v` is buggy for a filter function if `f(v)` 
      returns `false`. Why is `or nil` mandatory?

5. a. Define "Phony Targets" in Make.
   b. Analyze a scenario where having a file named "clean" breaks your Makefile 
      if `.PHONY: clean` is missing.

6. a. Define "Lazy Assignment" (`=`) in Makefiles.
   b. Contrast this with "Immediate Assignment" (`:=`). Which one behaves like 
      standard programming variables?

7. a. Define "Command Substitution" syntax `$(...)`.
   b. Compare it with "Process Substitution" `<(...)`. When would you use 
      `diff <(sort a) <(sort b)`?

8. a. Define "Type Propagation" vs "Type Inheritance".
   b. Explain how a compiler uses "upward" propagation to determine that 
      `3 + 4.5` results in a float.

9. a. Define `stderr` redirection `2>`.
   b. Synthesize a command that hides ALL output (stdout and stderr) from a 
      noisy script. (Hint: `/dev/null`).

10. a. Define "First-Class Functions".
    b. Analyze how the `collect` function accepting `f` as an argument proves 
       Lua has first-class functions.
